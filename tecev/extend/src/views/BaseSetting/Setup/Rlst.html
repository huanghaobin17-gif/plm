<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>角色权限管理</title>
<link type="text/css" rel="stylesheet" href="__PUBLIC__/css/style.css" />
<link type="text/css" rel="stylesheet" href="__PUBLIC__/css/forms.css" />
<style>
.input_box{ margin:5px;}
.input_btn{ margin:10px 0px;}
</style>
<script src="__PUBLIC__/js/common.js" type="text/javascript"></script>
<script src="__PUBLIC__/js/jquery-1.7.2.min.js" type="text/javascript"></script>
<script src="__PUBLIC__/js/lhgdialog.js?skin=iblue" type="text/javascript"></script>
<script src="__PUBLIC__/js/jsfunction.js" type="text/javascript"></script>
</head>
<body>

<div class="fl listitle bc1"><p class="fl fcfff">&nbsp;&nbsp;角色权限管理▼</p></div>
<div class="fl assets_list">
    <table width="100%" cellpadding="2" cellspacing="1" class="table-striped" id="nn" >
          <tr class="f16">
             <td align="center" width="10%"><label><input type="checkbox" /></td>
             <td align="center" width="10%">角色名称</td>
             <td align="center" width="80%">允许使用模块及模块权限</td>
           </tr>
           <tr>
             <td align="center"><label><input type="checkbox" /></label></td>
             <td align="center">超级管理员</td>
             <td>
             	<label>设备管理</label>、
                <label>统计分析</label>、
                <label>维修维护</label>、
                <label>巡查保养</label>、
                <label>质量控制</label>、
              	<label>基础设置</label>
             </td>
           </tr>
        <form method="post" action="__SELF__" onsubmit="return checkData()">
           <?php foreach($role as $k => $v){ ?>
           <tr>
               <td align="center"><label><input type="checkbox" name="roleid[<?php echo $k; ?>]" value="<?php echo $v[roleid] ?>"/></label></td>
               <td align="center"><input type="text" value="<?php echo $v[roleid] ?>" name="id[<?php echo $k; ?>]" style="display: none"/><?php echo $v[role]; ?></label></td>
               <td><div>
                   <table class="fl mod_role">
                       <?php foreach($name as $key => $value){ ?>
                            <tr>
                                <td width="15%"><label><?php echo $value; ?>：</label></td>
                                <?php foreach(json_decode($arr_action[$key],true) as $ke => $va){  ?>
                                <td align="center">
                                    <input id="<?php echo $ke.($key+1).$k; ?>" type="checkbox" name="<?php echo 'edit_array['.$k.']['.($key+1).'][]'; ?>" value="<?php echo $ke; ?>" /><label><?php echo $action[$ke]; ?></label>
                                    <div>
                                        <?php foreach($action_arr[$key][$ke] as $i => $j){ ?>
                                        <p><input id="<?php echo $j.($key+1).$k; ?>" name="<?php echo 'edit_arr['.$k.']['.($key+1).']['.$ke.']['.$i.']'; ?>" value="<?php echo $j; ?>" type="checkbox"/><label><?php echo $arr[$j]; ?></label></p>
                                        <?php } ?>
                                    </div>
                                </td>
                                <?php } ?>
                            </tr>
                       <?php } ?>
                   </table>
                    </div>
               </td>
           </tr>
           <?php } ?>
           <tr>
             <td align="center"><font>新增角色</font></td>
             <td align="center">
                 <input type="text" name="role" value="" class="input_box" placeholder="请填写角色名称" />
             </td>
             <td>
                 <div>
                     <table class="fl mod_role">
                 <?php foreach($name as $key => $value){ ?>
                         <tr>
                             <td width="15%"><label><?php echo $value; ?>：</label></td>
                             <?php foreach(json_decode($arr_action[$key],true) as $ke => $va){  ?>
                             <td align="center">
                                 <input type="checkbox" name="<?php echo 'array['.($key+1).'][]'; ?>" value="<?php echo $ke; ?>" onclick="s('<?php echo $ke.$key; ?>')"/><label><?php echo $action[$ke]; ?></label>
                                 <div id="<?php echo $ke.$key; ?>" style="display: none">
                                 <?php foreach($action_arr[$key][$ke] as $k => $v){ ?>
                                        <p><input name="<?php echo 'arr['.($key+1).']['.$ke.']['.$k.']'; ?>" value="<?php echo $v; ?>" type="checkbox"/><label><?php echo $arr[$v]; ?></label></p>
                                 <?php } ?>
                                 </div>
                             </td>
                             <?php } ?>
                         </tr>
                 <?php } ?>
                     </table>
                 </div>
             </td>
           </tr>
           <tr>
           	 <td align="center">
             	<input type="submit" class="input_btn"  value="删除选中" />
             </td>
             <td align="center" colspan="2">
            	<input type="submit" class="input_btn"  value="确认无误并提交"  />
             </td>
           </tr>
           </form>
    </table>
</div>
</div>
</body>
</html>
<script type="text/javascript">
function s(i){i
    Dsh(i);
}
var show_arrId =eval({$show_arrId});
for(var i=0;i<show_arrId.length;i++){
    document.getElementById(show_arrId[i]).checked=true;
}
var show_id =eval({$show_id});
for(var i=0;i<show_id.length;i++){
    document.getElementById(show_id[i]).checked=true;
}
</script>