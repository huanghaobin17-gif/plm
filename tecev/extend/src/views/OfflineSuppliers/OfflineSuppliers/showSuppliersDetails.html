<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>厂商详细信息</title>
    <include file="Public:layerHeader"/>
</head>
<body>
<div class="containDiv">
    <blockquote class="layui-elem-quote" style="padding: 5px 15px;margin-bottom: -10px;">
        厂商基础信息
    </blockquote>
    <table class="layui-table" lay-even="" lay-size="sm">
        <colgroup>
            <col width="18%">
            <col width="36%">
            <col width="18%">
            <col>
        </colgroup>
        <tbody>
        <tr>
            <td class="text-right">厂商名称：</td>
            <td>{$suppliers.sup_name}</td>
            <td class="text-right">厂商编号：</td>
            <td>{$suppliers.sup_num}</td>
        </tr>
        <tr>
            <td class="text-right">统一社会信用代码：</td>
            <td>{$suppliers.ECC_code}</td>
            <td class="text-right">厂商简称：</td>
            <td>{$suppliers.sup_abbr}</td>
        </tr>
        <tr>
            <td class="text-right">厂商类型：</td>
            <td>{$suppliers.suppliers_type}</td>
            <td class="text-right">传真：</td>
            <td>{$suppliers.fax_number}</td>
        </tr>
        <tr>
            <td class="text-right">业务员：</td>
            <td>{$suppliers.salesman_name}</td>
            <td class="text-right">业务员联系电话：</td>
            <td>{$suppliers.salesman_phone}</td>
        </tr>
        <tr>
            <td class="text-right">技术人员：</td>
            <td>{$suppliers.artisan_name}</td>
            <td class="text-right">技术人员联系电话：</td>
            <td>{$suppliers.artisan_phone}</td>
        </tr>
        <tr>
            <td class="text-right">邮箱：</td>
            <td>{$suppliers.email}</td>
            <td class="text-right">所在区域：</td>
            <td>{$suppliers.region}</td>
        </tr>
        <tr>
            <td class="text-right">详细地址：</td>
            <td>{$suppliers.address}</td>
            <td class="text-right">厂商状态：</td>
            <td>{$suppliers.statusName}</td>
        </tr>
        <tr>
            <td class="text-right">录入用户：</td>
            <td>{$suppliers.adduser}</td>
            <td class="text-right">录入时间：</td>
            <td>{$suppliers.adddate}</td>
        </tr>
        <tr>
            <td class="text-right">备注：</td>
            <td colspan="3">{$suppliers.break}</td>
        </tr>
        </tbody>
    </table>

    <notempty name="fileData">
        <blockquote class="layui-elem-quote" style="padding: 5px 15px;">证照信息</blockquote>
        <table class="layui-table read-table-l" lay-size="sm" lay-even="" style="margin-top: 0!important;">
            <colgroup>
                <col width="8%">
                <col width="40%">
                <col width="30%">
                <col width="15%">
            </colgroup>
            <tbody>
            <tr>
                <th>序号</th>
                <th>文件名称</th>
                <th>上传时间</th>
                <th>操作：</th>
            </tr>
            <volist name="fileData" id="vo">
                <tr>
                    <td>{$key+1}</td>
                    <td>{$vo.name}</td>
                    <td>{$vo.adddate}</td>
                    <td>{$vo.operation}</td>
                </tr>
            </volist>
            </tbody>
        </table>
    </notempty>
    <notempty name="auth_file">
        <blockquote class="layui-elem-quote" style="margin-bottom: -10px;">
            授权信息
        </blockquote>
        <table class="layui-table read-table-l fileTable" lay-size="sm">
            <colgroup>
                <col width="20%">
                <col width="20%">
                <col width="20%">
                <col width="20%">
                <col width="20%">
            </colgroup>
            <thead>
            <tr>
                <th class="th-align-center">授权文件名称</th>
                <th class="th-align-center">上传时间</th>
                <th class="th-align-center">授权时间</th>
                <th class="th-align-center">过期时间</th>
                <th class="th-align-center">操作</th>
            </tr>
            </thead>
            <tbody id="fileListView">
            <empty name="auth_file">
                <tr>
                    <td colspan="5" id="authFileEmpty" style="text-align: center !important;">暂无相关数据</td>
                </tr>
                <else />
                <volist name="auth_file" id="vo">
                    <tr>
                        <td class="td-align-center">{$vo.name}</td>
                        <td class="td-align-center">{$vo.adddate}</td>
                        <td class="td-align-center" >{$vo.record_date}</td>
                        <td class="td-align-center" >{$vo.term_date}</td>
                        <td class="td-align-center">
                            {$vo.operation}
                        </td>
                    </tr>
                </volist>
            </empty>
            </tbody>
            <button style="display: none" type="button" id="testUpload"></button>
        </table>
    </notempty>
</div>
</body>
</html>
<script>
    //下载
    $(document).on('click', '.downFile', function () {
        var params = {};
        params.path = $(this).data('path');
        params.filename = $(this).data('name');
        postDownLoadFile({
            url: admin_name+'/Tool/downFile',
            data: params,
            method: 'POST'
        });
        return false;
    });

    //预览
    $(document).on('click', '.showFile', function () {
        var path = $(this).data('path');
        var name = $(this).data('name');
        var url = admin_name+'/Tool/showFile';
        top.layer.open({
            id: 'showFiles',
            type: 2,
            title: name + '相关文件查看',
            scrollbar: false,
            offset: 'r',//弹窗位置固定在右边
            anim: 2, //动画风格
            area: ['75%', '100%'],
            closeBtn: 1,
            content: [url + '?path=' + path + '&filename=' + name]
        });
        return false;
    });

    //查看文件
    $(document).on('click', '.showAuthFile', function () {
        var path = $(this).attr('data-path');
        var name = $(this).attr('data-name');
        if (path) {
            var url = admin_name+'/Tool/showFile';
            top.layer.open({
                type: 2,
                title: name + '相关文件查看',
                scrollbar: false,
                offset: 'r',//弹窗位置固定在右边
                anim: 2, //动画风格
                area: ['75%', '100%'],
                closeBtn: 1,
                content: [url + '?path=' + path + '&filename=' + name]
            });
        } else {
            layer.msg(name + '未上传,请先上传', {icon: 2}, 1000);
        }
    });
    $(document).on('click', '.delFile', function () {
        var params = {};
        var fileid = $(this).attr('data-file-id');
        params.fileid = fileid;
        params.action = 'delete_auth';
        if (fileid) {
            $.ajax({
                timeout: 5000,
                type: "POST",
                url: '/A/OfflineSuppliers/editOfflineSupplier',
                data: params,
                dataType: "json",
                success: function (data) {
                    location.reload();
                },
                error: function () {
                    layer.msg('网络访问失败', {icon: 2, time: 3000});
                }
            });
        }
    });
</script>
