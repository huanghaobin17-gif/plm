<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>发布公告</title>
    <include file="Public:layerHeader"/>
</head>
<style>
    .layui-form-pane .layui-input-block{margin-left: 115px;}
    .file_list{
        margin-bottom: 20px;
    }
    .file_list ul li{
        margin-top: 10px;
    }
    .show_file{
        color:#01AAED;
        cursor: pointer;
        margin: 0 15px;
    }
    .del_file{
        color:#01AAED;
        cursor: pointer;
    }
    .addIcon{
        z-index: 99;
        position: absolute;
        left: 330px;
        top: 63px;
        cursor: pointer;
        color: #0a8ddf;
    }
</style>
<body>
<div class="containDiv">
    <div class="layui-fluid">
        <div class="layui-row" style="margin-top: 10px;">
            <form class="layui-form">
                <input name="notid" value="{$notid}" type="hidden">
                <div class="layui-form-item">
                    <div class="layui-form-label"><span class="rquireCoin"> * </span> 公告标题：</div>
                    <div class="layui-input-block">
                        <input type="text" name="title" autocomplete="off" placeholder="请输入公告标题" value="{$noticeInfo.title}" class="layui-input" lay-verify="title">
                    </div>
                </div>
                <div class="layui-form-item" pane="">
                    <label class="layui-form-label">是否置顶：</label>
                    <div class="layui-input-block">
                        <if condition="$noticeInfo.top eq 1">
                            <input type="checkbox" checked lay-skin="switch" lay-filter="switchTest" >
                            <input type="hidden" name="top" value="1">
                            <else />
                            <input type="checkbox" lay-skin="switch" lay-filter="switchTest" >
                            <input type="hidden" name="top" value="0">
                        </if>
                    </div>
                </div>
                <div class="layui-form-item">
                    <div class="layui-inline">
                        <div class="layui-form-label">发布者：</div>
                        <div class="layui-input-inline">
                            <input type="text" readonly value="{$userInfo.username}" name="adduser" class="layui-input">
                            <input type="hidden" readonly value="{$$userInfo.userid}" name="adduserid" class="layui-input">
                        </div>
                    </div>
                    <div class="layui-inline">
                        <div class="layui-form-label">发布日期：</div>
                        <div class="layui-input-inline">
                            <input type="text" readonly value="{$now}" name="adddate" class="layui-input">
                        </div>
                    </div>
                </div>
                <div class="layui-form-item layui-form-text">
                    <div class="layui-form-label"><span class="rquireCoin"> * </span> 公告正文：</div>
                    <div class="layui-input-block">
                        <textarea class="layui-textarea" rows="25" id="editor" style="display: none;">{$noticeInfo.content}</textarea>
                    </div>
                </div>
                <div class="layui-form-item">
                    <div class="layui-form-label" style="float: left;"><span class="rquireCoin"> * </span> 相关文件：</div>
                    <div style="float: left;">
                        <div class="file_list">
                            <ul id="add_files">
                                <volist name="files" id="vo">
                                    <li>
                                        <input type="hidden" name="file_name[]" value="{$vo['file_name']}">
                                        <input type="hidden" name="save_name[]" value="{$vo['save_name']}">
                                        <input type="hidden" name="file_type[]" value="{$vo['file_type']}">
                                        <input type="hidden" name="file_size[]" value="{$vo['file_size']}">
                                        <input type="hidden" name="file_url[]" value="{$vo['file_url']}">
                                        <span>{$vo.img} {$vo.file_name}</span>
                                        <span class="show_file" data-path="{$vo['file_url']}" data-name="{$vo['file_name']}"  class="show_file">预览</span>
                                        <span class="del_file">删除</span>
                                    </li>
                                </volist>
                            </ul>
                        </div>
                        <div class="layui-form-item">
                            <div class="layui-inline">
                                <button type="button" class="layui-btn" id="uploadFileEmer">
                                    <i class="layui-icon">&#xe67c;</i>确定上传
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="layui-form-item">
                    <div class="layui-inline">
                        <label class="layui-form-label" style="width: 100px;">可查看角色：</label>
                        <div class="layui-input-inline" style="width: 300px;">
                            <select xm-select="group" xm-select-search="" id="refreshGroup">
                                <volist name="user_group" id="v">
                                    <empty name="v.selected">
                                        <option value="{$v.roleid}">{$v.role}</option>
                                        <else />
                                        <option value="{$v.roleid}" selected="selected">{$v.role}</option>
                                    </empty>
                                </volist>
                            </select>
                        </div>
                    </div>
                    <div class="layui-inline">
                        <label class="layui-form-label" style="width: 100px;">对应用户：</label>
                        <div class="layui-input-inline" style="width: 300px;">
                            <select xm-select="group_user" xm-select-search="">
                                <volist name="inUser" id="v">
                                    <empty name="v.selected">
                                        <option value="{$v.userid}">{$v.username}</option>
                                        <else />
                                        <option value="{$v.userid}" selected="selected">{$v.username}</option>
                                    </empty>
                                </volist>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="layui-form-item" style="text-align: center">
                    <button class="layui-btn" lay-submit lay-filter="save"><i class="layui-icon">&#xe609;</i>提交</button>
                    <button type="reset" class="layui-btn layui-btn-primary"><i class="layui-icon">ဂ</i> 重置 </button>
                </div>
            </form>
        </div>
    </div>
</div>
</body>
</html>
<script>
    layui.use('controller/basesetting/notice/editNotice', layui.factory('controller/basesetting/notice/editNotice'));
</script>